(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{161:function(e,t,n){"use strict";n.r(t);var a=n(1),o=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("p",[e._v("The goal of this project it to:")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("Practice consuming a rest api (or json file) with node")])]),e._v(" "),n("li",[n("p",[e._v("Practice building, sorting, and cycling through arrays")])]),e._v(" "),n("li",[n("p",[e._v("Figure out which game has the best ratio of viewers to streamers on")]),e._v(" "),n("blockquote",[n("p",[e._v("twitch")])])])]),e._v(" "),n("p",[e._v("To acomplish that we are going to build a node app. So lets get started!")]),e._v(" "),n("p",[e._v("First we need to include our require documents and set up objects in the\nglobal scope. I am using FS for things on the file system or request for\nwhen I need to make an api request")]),e._v(" "),n("p",[e._v('var fs = require("fs");')]),e._v(" "),n("p",[e._v("var request = require('request');")]),e._v(" "),n("p",[e._v("var contents = {}")]),e._v(" "),n("p",[e._v('Next we want to define the function that "does the work." The first\nstep of the function is to take contents that are passed into it, parses\nthem to json. Also included as look up the word paramaters as the things\npassed into JS functions paramaters for this fuction are channelMin and\nviewerMin. I use these to filter out the games where one popular\nstreamer is playing an obscure game and slightly altering the data. I\noriginally didn\'t have these catches in place and "Gothic II" was the\nbest game to play because rocketbeans was streaming it. I then had them\nas hard coded but I thought it could be a valid use case where you want\nto sweep up all the people who realize they like Gothic 2 after rocket\nbeans calls it a day. We loop through every game in the list and if it\nmeets the criteria of the channelMin and viewerMin and add them to a\ngames array.')]),e._v(" "),n("p",[e._v("Once in the games array we apply a sort to them. This spesific sort\nranks them by their viewer to channel ratio. Sort is an ES6 function\nthat works by taking a function with two paramaters and applying them\nagainst eachother over and over again.")]),e._v(" "),n("p",[e._v("After we have a list of games that meet our criteria and have them\nsorted we take the top 10 and add them to a string we return so it can\nbe printed to the screen. My original thought was to make this console\nlog directly from with in the function, but if I want to reuse this\nlater having it return a string is a step in the right direction. A\nsting isn't really reusable, but if I need to have it dump out an\narray, or an object its easier to build around this string then it\nconsol logging directly from within the function.")]),e._v(" "),n("p",[e._v("var bestGamesToStream = function(contents, channelMin, viewerMin){")]),e._v(" "),n("p",[e._v("var jsonContent = JSON.parse(contents);")]),e._v(" "),n("p",[e._v("var games = []")]),e._v(" "),n("p",[e._v("for(var i = 0; i < jsonContent.top.length; i++){")]),e._v(" "),n("p",[e._v("if(jsonContent.top[i].channels > channelMin &&\njsonContent.top[i].viewers > viewerMin){")]),e._v(" "),n("p",[e._v("games.push({")]),e._v(" "),n("p",[e._v('"name": jsonContent.top[i].game.name,')]),e._v(" "),n("p",[e._v('"viewersPerChannel": Math.floor(jsonContent.top[i].viewers /\njsonContent.top[i].channels)')]),e._v(" "),n("p",[e._v("})")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("games.sort(function (a, b) {")]),e._v(" "),n("p",[e._v("if (a.viewersPerChannel < b.viewersPerChannel) {")]),e._v(" "),n("p",[e._v("return 1;")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("if (a.viewersPerChannel > b.viewersPerChannel) {")]),e._v(" "),n("p",[e._v("return -1;")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("// a must be equal to b")]),e._v(" "),n("p",[e._v("return 0;")]),e._v(" "),n("p",[e._v("});")]),e._v(" "),n("p",[e._v('output = ""')]),e._v(" "),n("p",[e._v("for(var i = 0; i < 10; i++){")]),e._v(" "),n("p",[e._v("game = games[i];")]),e._v(" "),n("p",[e._v('output += game.name + "-" + game.viewersPerChannel + "\\n"')]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("return output")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("The last thing we need to do is pull our data from either a file or\ndirectly from the API and pass it to the function we do that in one of\ntwo ways.")]),e._v(" "),n("p",[e._v("From a file:")]),e._v(" "),n("p",[e._v('var fileData = fs.readFileSync("twitchdata.json");')]),e._v(" "),n("p",[e._v("console.log(bestGamesToStream(fileData, 4, 4000))")]),e._v(" "),n("p",[e._v("From the API:")]),e._v(" "),n("p",[e._v("request('https://api.twitch.tv/kraken/games/top?limit=100&offset=0',\nfunction (error, response, body) {")]),e._v(" "),n("p",[e._v("if (!error && response.statusCode == 200) {")]),e._v(" "),n("p",[e._v("console.log(bestGamesToStream(body, 4, 4000))")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("})")]),e._v(" "),n("p",[e._v("So when we pull it all togeather it looks something like this:")]),e._v(" "),n("p",[e._v('var fs = require("fs");')]),e._v(" "),n("p",[e._v("var request = require('request');")]),e._v(" "),n("p",[e._v("var contents = {}")]),e._v(" "),n("p",[e._v("var bestGamesToStream = function(contents, channelMin, viewerMin){")]),e._v(" "),n("p",[e._v("var jsonContent = JSON.parse(contents);")]),e._v(" "),n("p",[e._v("var games = []")]),e._v(" "),n("p",[e._v("for(var i = 0; i < jsonContent.top.length; i++){")]),e._v(" "),n("p",[e._v("if(jsonContent.top[i].channels > channelMin &&\njsonContent.top[i].viewers > viewerMin){")]),e._v(" "),n("p",[e._v("games.push({")]),e._v(" "),n("p",[e._v('"name": jsonContent.top[i].game.name,')]),e._v(" "),n("p",[e._v('"viewersPerChannel": Math.floor(jsonContent.top[i].viewers /\njsonContent.top[i].channels)')]),e._v(" "),n("p",[e._v("})")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("games.sort(function (a, b) {")]),e._v(" "),n("p",[e._v("if (a.viewersPerChannel < b.viewersPerChannel) {")]),e._v(" "),n("p",[e._v("return 1;")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("if (a.viewersPerChannel > b.viewersPerChannel) {")]),e._v(" "),n("p",[e._v("return -1;")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("// a must be equal to b")]),e._v(" "),n("p",[e._v("return 0;")]),e._v(" "),n("p",[e._v("});")]),e._v(" "),n("p",[e._v('output = ""')]),e._v(" "),n("p",[e._v("for(var i = 0; i < 10; i++){")]),e._v(" "),n("p",[e._v("game = games[i];")]),e._v(" "),n("p",[e._v('output += game.name + "-" + game.viewersPerChannel + "\\n"')]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("return output")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v('var fileData = fs.readFileSync("twitchdata.json");')]),e._v(" "),n("p",[e._v("console.log(bestGamesToStream(fileData, 4, 4000))")]),e._v(" "),n("p",[e._v("Not exactly the most complicated bit of code, but it solves a problem,\nno matter how contrived that problem is.")])])}],!1,null,null,null);t.default=o.exports}}]);